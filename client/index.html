<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link href="https://unpkg.com/tailwindcss@^1.4/dist/tailwind.min.css" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
      integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>

    <!-- Memberstack -->
    <script src="https://api.memberstack.io/static/memberstack.js?webflow"
      data-memberstack-id="2a3426d0e4e6d15973f59f121515b10a"> </script>
  </head>

  <body>
    <div id="public" class="p-8 bg-red-200">Not logged in</div><button>log in</button>

    <div id="users">

    </div>

    <div>
      <div id="firebase-notification" class="p-6 text-red-800 bg-red-300"></div>
    </div>

    <a href="#/ms/login">MEMBERSTACK</a>

    <form action="#/ms/login">
      <input type="text" name="data-ms-member" value="email">
      <input type="text" name="data-ms-member" value="password">
      <button type="submit">Submit</button>
    </form>


    <div class="flex items-center w-full mx-auto mb-4 sm:w-1/2">
      <img class="hidden inline w-12 h-12 mr-4 rounded user-image" src="" />
      <span id="username" class="text-xl font-bold"></span>
    </div>
    <div class="w-full mx-4 border rounded sm:w-1/2 sm:mx-auto">
      <div class="p-4 font-bold bg-gray-100 border-b">Tools Used</div>
      <div id="companies" class="grid md:grid-cols-2 xl:grid-cols-4"></div>
    </div>

    <div id="firebaseui-auth-container"></div>
    <button class="p-2 bg-green-200 rounded" onclick="sampleData()">ADD data</button>
    <div id="member" class="hidden p-8 bg-green-200">Content for logged in</div>


    <form id="wf-form-Submit-Project" class="p-6 bg-gray-400">
      <input type="text" name="name">
      <input type="text" name="subtitle">
      <input type="submit" />
    </form>

    <script src='https://js.sentry-cdn.com/dd1a9266f9ab4089af3422b735840179.min.js' crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.16.0/firebase-storage.js"></script>

    <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
    <script src="firebase.js"></script>
    <script src="user.js"></script>
    <script src="companies.js"></script>
    <script src="projects.js"></script>
    <script src="tutorials.js"></script>
    <script src="dashboard.js"></script>

    <script>
      MemberStack.onReady.then(async function (member) {

        // Checks if member is logged in
        if (member.loggedIn) {

          const metadata = await member.getMetaData();

          // If no metadata.video exists, create it in MemberStack.
          metadata.videos = metadata.videos || [];

          // Defines the webflow video ID to a const of itemID (Pull this from the CMS)
          const itemID = "{{wf {&quot;path&quot;:&quot;item-id&quot;,&quot;type&quot;:&quot;PlainText&quot;\} }}"

          // If they have the item ID in their profile, hide the form, show the 'completed button'
          if (metadata.videos.includes(itemID)) {
            document.getElementById('mark-as-watched').style.display = 'none';
            document.getElementById('video-complete').style.display = 'block';
          }

          // When the button is clicked, if the itemID doesn't exist on their profile
          // add it, then push the metadata to MemberStack. 
          $('#mark-as-watched').click(function () {

            if (metadata.videos.indexOf(itemID) === -1) {

              metadata.videos.push(itemID);

              member.updateMetaData(metadata);

            }
          });
        }
      });
    </script>

    <script>
      MemberStack.onReady.then(async function (member) {

        // Checks if member is logged in
        if (member.loggedIn) {

          const metadata = await member.getMetaData();

          // If no metadata.video exists, create it in MemberStack.
          metadata.watchlist = metadata.watchlist || [];

          // Defines the webflow video ID to a const of itemID (Pull this from the CMS)
          const itemID = "{{wf {&quot;path&quot;:&quot;item-id&quot;,&quot;type&quot;:&quot;PlainText&quot;\} }}"

          // If they have the item ID in their profile, hide the form, show the 'completed button'
          if (metadata.watchlist.includes(itemID)) {
            document.getElementById('mark-as-listed').style.display = 'none';
            document.getElementById('listed').style.display = 'block';
          }

          // When the button is clicked, if the itemID doesn't exist on their profile
          // add it, then push the metadata to MemberStack. 
          $('#mark-as-listed').click(function () {

            if (metadata.watchlist.indexOf(itemID) === -1) {

              metadata.watchlist.push(itemID);

              member.updateMetaData(metadata);

            }
          });
        }
      });
    </script>

  </body>

</html>